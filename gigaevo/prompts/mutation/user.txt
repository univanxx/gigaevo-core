EVOLUTIONARY MUTATION: Adaptive Code Evolution

Transform the program using program insights and historical lineage intelligence with intelligent exploration/exploitation balance.

## INTELLIGENCE INPUTS

**PROGRAM INSIGHTS**: category [tag] (severity): concrete evidence
- Categories: LLM-generated 1-2 word labels
- Tags: beneficial, harmful, neutral, fragile, rigid
- Severity: high, medium, low

**TAG MEANINGS (evolutionary guidance)**:
- **beneficial**: Current pattern is good → PRESERVE/EXTEND this approach
- **harmful**: Current pattern is bad → REMOVE/AVOID this approach
- **fragile**: Current pattern is risky → IMPROVE/ROBUSTIFY this approach
- **rigid**: Current pattern is inflexible → MAKE MORE ADAPTABLE
- **neutral**: Current pattern has no clear impact → IGNORE for evolution

**LINEAGE INSIGHTS**: Historical mutation outcomes and their measured effects
- strategy: imitation/generalization/avoidance/exploration/refinement (past action taken)
- description: causal explanation with quantified impact (≤50 words)
- delta: measured performance impact (relative change)

**EVOLUTIONARY STATISTICS**: Population-level context
- Generation history table: fitness trends across generations (← marks current)
- Is useful to gauge population progress and inform exploration/exploitation balance

## EVOLUTIONARY ARCHETYPE SELECTION

Choose your evolutionary approach based on evidence strength and risk tolerance:

### EXPLOITATION ARCHETYPES (Evidence-Driven Refinement)
**When lineage shows consistent positive outcomes and strong beneficial insights:**

1. **Precision Optimization**
   → Fine-tune proven patterns, minimal risk changes, conservative improvements

2. **Proven Pattern Extension**
   → Replicate successful strategies, generalize working approaches, safe adaptations

3. **Harmful Pattern Removal**
   → Eliminate documented failure modes, clean up problematic code, defensive improvements

### EXPLORATION ARCHETYPES (Innovation-Driven Change)
**When lineage shows failures, weak evidence, or strong harmful/rigid insights:**

4. **Computational Reinvention**
   → Novel algorithmic paradigms, alternative data representations, constraint-driven design

5. **Solution Space Exploration**
   → New problem-solving strategies, unexplored search spaces, alternative optimization flows

6. **Approach Synthesis**
   → Combine multiple techniques, hybrid architectures, emergent computational behaviors

### HYBRID ARCHETYPES (Balanced Approach)
**When evidence is mixed or moderate confidence:**

7. **Guided Innovation**
   → Preserve proven elements while introducing targeted improvements

8. **Conservative Exploration**
   → Explore within safe boundaries, maintain structural integrity

## ARCHETYPE SELECTION FRAMEWORK

**Evidence Assessment**:
- **Strong positive lineage** + **beneficial insights** → Choose Exploitation archetype
- **Weak/negative lineage** + **harmful/rigid insights** → Choose Exploration archetype
- **Mixed evidence** + **moderate confidence** → Choose Hybrid archetype

**Risk Tolerance**:
- **High confidence** → Exploitation archetypes (1-3)
- **Low confidence** → Exploration archetypes (4-6)
- **Moderate confidence** → Hybrid archetypes (7-8)

## EXECUTION PRINCIPLES

- **Evidence-driven**: 1-3 program insights from distinct categories required
- **Archetype-appropriate**: Match change scope to selected archetype
- **Historical guidance**: leverage lineage outcomes while allowing for innovation
- **Traceability**: link all changes to specific insights or lineage evidence
- **Prioritization**: severity first, then beneficial/fragile tags preferred
- **Delta preference**: favor strategies with positive historical outcomes
- **Tag-based action**: Use harmful insights to REMOVE patterns, beneficial/fragile to PRESERVE/IMPROVE patterns
- **Archetype constraints**:
  - Exploitation: ≤2 small, localized changes
  - Exploration: Meaningful structural novelty required
  - Hybrid: Balance proven elements with targeted innovations

## LIGHTWEIGHT ADDITIONS (ADAPTIVE)
- **Plateau trigger:** If recent lineage shows small |Δfitness| magnitudes, prefer **Exploration** for this mutation.
- **Category diversification:** If a category recently produced harmful/negative Δfitness, explore a **different** category this time.
- **No-repeat harmful (unguarded):** Do **not** reintroduce a strategy tagged **harmful** in lineage unless accompanied by a clear **guard** or corrective mechanism.

## OUTPUT FORMAT (STRUCTURED JSON)

Your response will be parsed as JSON. Format:

```json
{{
  "archetype": "Selected archetype name",
  "justification": "2-3 sentences: which insights you're acting on, what strategy you're using, and how this mutation is expected to improve fitness.",
  "insights_used": ["insight1 text", "insight2 text", ...],
  "code": "complete Python program"
}}
```

**FIELDS:**
- **archetype**: One of the 8 archetypes (e.g., "Precision Optimization", "Computational Reinvention")
- **justification**: Free-form reasoning — cite program insights, lineage insights, and/or evolutionary statistics naturally
- **insights_used**: Flat array of insight strings you acted on (copy the insight text verbatim)
- **code**: Complete mutated Python program (raw code, NO markdown fences)

**CRITICAL**:
- Include 1-3 insights in `insights_used` from the provided program insights
- The `code` field must contain ONLY valid Python code
- Focus on code quality — the justification should support your changes, not the other way around

{parent_blocks}
